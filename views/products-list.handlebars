<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
    <h1>All Products</h1>
    <div>
        </div>
</div>

{{#if products.length}}
    <div class="product-grid">
        {{#each products}}
        <div class="product-card">
            <img src="/uploads/{{this.image}}" alt="{{this.name}}" class="product-image" onerror="this.src='/uploads/default-product.jpg'">
            <div class="product-info">
                <h3 class="product-title">{{this.name}}</h3>
                <p class="product-price">${{this.price}}</p>
                <p class="product-description">{{this.description}}</p>
                <p style="color: #666; font-size: 0.9rem;">by {{this.seller.name}}</p>
                <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                    <a href="/product/{{this._id}}" class="btn btn-secondary" style="flex: 1; text-align: center;">View Details</a>
                    {{#if ../user}}
                        {{#if (eq ../userRole 'user')}}
                            <form method="POST" action="/cart/add" style="flex: 1;">
                                <input type="hidden" name="productId" value="{{this._id}}">
                                <input type="hidden" name="quantity" value="1">
                                <button type="submit" class="btn btn-primary" style="width: 100%;">Add to Cart</button>
                            </form>
                        {{/if}}
                    {{/if}}
                </div>
            </div>
        </div>
        {{/each}}
    </div>

    {{#if pagination}}
        <div class="pagination">
            {{#if pagination.hasPrev}}
                <a href="?page={{pagination.prev}}">&laquo; Previous</a>
            {{/if}}
            
            <span class="current">Page {{pagination.current}} of {{pagination.total}}</span>
            
            {{#if pagination.hasNext}}
                <a href="?page={{pagination.next}}">Next &raquo;</a>
            {{/if}}
        </div>
    {{/if}}
{{else}}
    <div class="card" style="text-align: center;">
        <h2>No Products Found</h2>
        <p>There are no products available at the moment.</p>
        {{#if (eq userRole 'seller')}}
            <a href="/seller/dashboard" class="btn btn-primary">Add Your First Product</a>
        {{/if}}
    </div>
{{/if}}